# Лабораторная работа 4
## Цель: 
1) Написать “плохой” CI/CD файл, который работает, но в нем есть не менее пяти “bad practices” по написанию CI/CD
2) Написать “хороший” CI/CD, в котором эти плохие практики исправлены
3) В Readme описать каждую из плохих практик в плохом файле, почему она плохая и как в хорошем она была исправлена, как исправление повлияло на результат

   
## Ход работы: 
Необходимо сделать пайтон проект с 2 файлами хороших и плохих практик CI/CD. 

![папки](https://github.com/user-attachments/assets/6dddd7f1-54ce-4e00-800f-601c2268b132)

Сначала добавить все файлы в индекс git и создать коммит. 

![image](https://github.com/user-attachments/assets/fc63be92-98eb-4992-a696-6a0271b36ee5)

![image](https://github.com/user-attachments/assets/057d60d9-f466-4cb8-a30c-4ff13e181af2)

До этого клонировали репозиторий. 

![image](https://github.com/user-attachments/assets/dcbfe84e-25b0-46e9-87bd-ba12c2782992)

Мы осознаем, что это плохо, но закоммитили в мейн

![image](https://github.com/user-attachments/assets/08fc46da-e973-4688-875e-38109d6568bf)

В конечном итоге хороший пайплайн сработал без ошибок, а плохой с ошибками. 

![image](https://github.com/user-attachments/assets/3bc59743-86ba-456f-958d-71fdd33322d7)

![image](https://github.com/user-attachments/assets/29bda35e-26f2-4185-849e-217dd42f35ec)

Ошибка в плохом: 

![image](https://github.com/user-attachments/assets/5271e279-9876-4c05-9b91-9131f48c2ca9)

Наш хороший файл: 

![image](https://github.com/user-attachments/assets/53b65f38-d9e8-4db6-abcf-570ba8283127)

Плохой: 

![image](https://github.com/user-attachments/assets/a4d7c985-dddb-4928-ab3d-709ecba45450)

Проверяем все в GIthub Actions, потому что при попытке работы с Gitlab были проблемы.

![image](https://github.com/user-attachments/assets/56ac1a39-556d-421b-8a54-d8f0a8e050a3)

Теперь поговорим про плохие практики и их исправления: 

1) Мы использовали устаревшую версию Python
   Версия 3.6 сейчас официально не поддерживается. Тем самым это уже становится не безопасно, есть вероятность, что не будет совместимости с библиотеками новыми.
   Как исправили: сделали версию 3.8, которая поддерживается и обновляется. Мы обеспечили совместимость с актуальными библиотеками и получением обновлений безопасности
2) Ручками клонировали репозиторий.
   Мы не используем встроенные возможности actions/checkout, такие как управление аутентификацией и работа с субмодулями. А если еще и ошибиться в URL....
   Как исправили: да просто использовали стандартный actions/checkout@v3. Тем самым повысили эффективность клонирования. 
3) Явная установка зависимостей напрямую.
   Нам сложно управлять тогда версиями. Не обеспечивает воспроизводимость окружения.
   Как исправили: использовали файл requirements.txt для управления зависимостями. Мы тем самым упростили обновление и добавление зависимостей. 
4) Тесты запускаются конкретным файлом
   Новые файлы нужно будет ручками прописывать, это не будет сделано автоматически.
   Как исправили: использовали автоматическое обнаружение тестов с помощью unittest. Все тесты запускаются автоматически. 
5) Нет ограничения на ветки для запуска пайплайна
   Пайплайн должен запускаться на каждое событие push вне зависимости от ветки. И получаем ненужные запуски...
   Как исправили: ограничили запуск пайплайна на ветке main и при создании pull request

Как же это повлияло на результат: 
Во-первых, теперь мы уверены, что у нас будут обновления, что мы не застрянем с старой версией 3.6, а будем "шагать" со временем. Мы повысили стабильность и безопасность пайплайна.

Итог: 
Пайплайн успешно выполняется без ошибок. Улучшена безопасность за счет использования стандартных экшенов и ограничения доступа к репозиторию. Оптимизировано использование ресурсов путем ограничения запусков пайплайна на основной ветке.
